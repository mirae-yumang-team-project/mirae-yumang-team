<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>STARLOG</title>
    <link rel="stylesheet" href="/static/css/reset.css">
    <link rel="stylesheet" href="/static/css/announcement.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <main>
        <section class="hero">


            <div class="wrap">
                <div class="hero-content">
                    <header>
                        <div>
                            <a href="/posts">학교 커뮤니티</a>
                            <a href="/chatai">오늘의 운세</a>
                            <a href="/announcement">채용공고</a>
                        </div>
                    </header>

                    <div class="header-logo">
                        <a href="/home">STARLOG</a>
                    </div>
                    <div class="header-menu">

                        <!-- 로그인 여부에 따라 다른 메뉴 표시 -->
                        <div th:if="${username}">
                            <a href="/mypage" th:text="${username} + '님'"></a>
                            <a href="/auth/logout">로그아웃</a>
                        </div>
                        <div th:unless="${username}">
                            <a href="/auth/login">로그인</a>
                            <a href="/auth/register">회원가입</a>
                        </div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="announcement">
                        <!-- <div class="announcement-content"> -->
                        <div class="main-announcement">
                            <div>
                                <ul>
                                    <li>최윤서 pt</li>
                                    <li>최윤서와 '피자 타임'을 즐기세요</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>박상진게임회사</li>
                                    <li>월급 6억위안</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>신유빈의 발레리나 댄스 강사구함</li>
                                    <li>근명고 신유빈임</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>건과 민우의 흑마법 재물구함</li>
                                    <li>검은 기운을 받아 "흑"마법을 쓸수있음</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>박현서의 복싱교실 샌드백구함</li>
                                    <li>전치 3주가 되어도 본인 책임</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>강나라의 편집자</li>
                                    <li>채널명: 피크민 <br>

                                        주요 콘텐츠: 모바일 배틀그라운드 및 종합게임 <br>

                                        현재 상황: 구독자 69명 편생직장 희망하는 분들은 오세요</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>나랑 쓰껄할 여친 구함</li>
                                    <li>나 박준용인데 인생 ㅈ같아서 여친구한다</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>유태민</li>
                                    <li>내밑으로 올 최백령구함@@@@</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>
                            <div>
                                <ul>
                                    <li>나 최백령인데</li>
                                    <li>더보기...</li>
                                    <button>즉시지원하기</button>
                                </ul>
                            </div>


                        </div>

                    </div>
                    <div class="footer">
                        <div class="pagination">
                            <button class="page-btn" data-page="prev">이전</button>
                            <div id="page-numbers" style="display: flex; gap: 5px;"></div>
                            <button class="page-btn" data-page="next">다음</button>
                        </div>
                    </div>

                </div>
                <!-- </div> -->
            </div>
        </section>
    </main>
</body>
<script>
    const postsPerPage = 8;
    let currentPage = 1;

    const allPosts = Array.from(document.querySelectorAll('.main-announcement > div')); // 부모 div 선택으로 수정
    const totalPages = Math.ceil(allPosts.length / postsPerPage);
    const pageNumbersContainer = document.getElementById('page-numbers');

    function renderPageNumbers() {
        pageNumbersContainer.innerHTML = ''; // 기존 버튼 초기화

        for (let i = 1; i <= totalPages; i++) {
            const span = document.createElement('span');
            span.textContent = i;
            span.classList.add('page-number');
            if (i === currentPage) span.classList.add('active'); // 현재 페이지 강조

            span.addEventListener('click', () => {
                showPage(i);
            });
            pageNumbersContainer.appendChild(span);
        }
    }

    function showPage(page) {
        currentPage = page;
        allPosts.forEach((post, index) => {
            const start = (currentPage - 1) * postsPerPage;
            const end = currentPage * postsPerPage;
            post.style.display = (index >= start && index < end) ? 'block' : 'none';
        });

        renderPageNumbers(); // 페이지 번호 상태 업데이트
    }

    // 초기 실행
    showPage(1);

    // 이전/다음 버튼 이벤트
    document.querySelectorAll('.page-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            if (btn.dataset.page === 'prev' && currentPage > 1) {
                showPage(currentPage - 1);
            } else if (btn.dataset.page === 'next' && currentPage < totalPages) {
                showPage(currentPage + 1);
            }
        });
    });
</script>

</html>