<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>글 수정</title>
  <link rel="stylesheet" href="/static/css/reset.css">
  <link rel="stylesheet" href="/static/css/post-edit.css">
</head>
<body>
<div class="navbar">
  <a href="/home" class="navbar-brand">스프링 게시판</a>
    <div class="navbar-menu">
        <span th:if="${username}" style="color: white;" ></span>
        <a href="/posts">게시판</a>
        <a th:if="${username}" href="/mypage" th:text="${username} + '님'"></a>
        <a th:if="${username}" href="/auth/logout">로그아웃</a>
  </div>
</div>

<div class="container">
  <div class="write-box">


    <!-- 학습용: 수정과 작성의 차이를 보여주는 정보 박스 -->
    <div class="info-box">
      <span>💡 수정 중인 글: #<span th:text="${post.id}"></span> | 작성일: <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></span></span>
    </div>

    <!-- 에러 메시지 표시 -->
    <div th:if="${error}" class="error-message">
      <span th:text="${error}"></span>
    </div>

    <!-- 
      학습 포인트:
      1. th:action으로 동적 URL 생성 (/posts/12/edit)
      2. th:value로 기존 값 채우기
      3. th:text로 기존 내용 채우기 (textarea는 value 대신 text)
    -->
    <form th:action="@{/posts/{id}/edit(id=${post.id})}" method="post">
      <div class="form-group">
        <input type="text" id="title" name="title"
               th:value="${post.title}"
               placeholder="제목을 입력하세요" required>
      </div>

      <div class="form-group">
        <textarea id="content" name="content"
                  placeholder="내용을 입력하세요" 
                  required
                  th:text="${post.content}"></textarea>
      </div>

      <div class="button-group">
        <button type="submit">수정완료</button>
        <a th:href="@{/posts/{id}(id=${post.id})}" class="btn-cancel">취소</a>
      </div>
    </form>
  </div>
</div>
</body>
</html>
